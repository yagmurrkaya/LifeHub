<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:LifeHub.ViewModels.HabitTracker"
             x:Class="LifeHub.Views.HabitTracker.HabitEditPage"
             x:DataType="vm:HabitEditViewModel"
             Title="AlÄ±ÅŸkanlÄ±ÄŸÄ± DÃ¼zenle"
             BackgroundColor="{AppThemeBinding Light={StaticResource PageBgLight}, Dark={StaticResource PageBgDark}}">

    <ContentPage.Resources>
        <Style x:Key="EditCardStyle" TargetType="Border">
            <Setter Property="Stroke" Value="{AppThemeBinding Light={StaticResource PeachBorder}, Dark={StaticResource Gray600}}"/>
            <Setter Property="StrokeThickness" Value="1.5"/>
            <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource SurfaceBgLight}, Dark={StaticResource SurfaceBgDark}}"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="0,10"/>
            <Setter Property="StrokeShape">
                <Setter.Value>
                    <RoundRectangle CornerRadius="16"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ActionButtonStyle" TargetType="Button">
            <Setter Property="HeightRequest" Value="50"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="FontAttributes" Value="Bold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Margin" Value="0,5"/>
        </Style>
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="25" Spacing="15">

            <Border Stroke="{StaticResource OrangePrimary}" 
                    StrokeThickness="1" 
                    BackgroundColor="{AppThemeBinding Light={StaticResource SurfaceBgLight}, Dark={StaticResource SurfaceBgDark}}" 
                    Padding="15" HeightRequest="80" StrokeShape="RoundRectangle 12" Margin="0,0,0,10">
                <Label Text="DÃ¼zenle âœï¸" 
                       FontSize="24" 
                       FontAttributes="Bold" 
                       HorizontalOptions="Center" 
                       VerticalOptions="Center" 
                       TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight}, Dark={StaticResource TextPrimaryDark}}"/>
            </Border>

            <Border Style="{StaticResource EditCardStyle}">
                <VerticalStackLayout Spacing="15">
                    
                    <VerticalStackLayout Spacing="5">
                        <Label Text="AlÄ±ÅŸkanlÄ±k Ä°smi" 
                               TextColor="{AppThemeBinding Light={StaticResource TextSecondaryLight}, Dark={StaticResource TextSecondaryDark}}" 
                               FontAttributes="Bold" Margin="5,0"/>
                        <Entry Text="{Binding CurrentHabit.Name}" 
                               Placeholder="Ä°sim girin..."
                               PlaceholderColor="{StaticResource Gray400}"
                               BackgroundColor="{AppThemeBinding Light={StaticResource PageBgLight}, Dark={StaticResource Gray900}}"
                               TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight}, Dark={StaticResource TextPrimaryDark}}"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="5">
                        <Label Text="Birim (Metric)" 
                               TextColor="{AppThemeBinding Light={StaticResource TextSecondaryLight}, Dark={StaticResource TextSecondaryDark}}" 
                               FontAttributes="Bold" Margin="5,0"/>
                        <Picker ItemsSource="{Binding MetricsList}" 
                                SelectedItem="{Binding CurrentHabit.Metric}"
                                Title="Birim SeÃ§in"
                                BackgroundColor="{AppThemeBinding Light={StaticResource PageBgLight}, Dark={StaticResource Gray900}}"
                                TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight}, Dark={StaticResource TextPrimaryDark}}"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Spacing="5">
                        <Label Text="GÃ¼nlÃ¼k Hedef" 
                               TextColor="{AppThemeBinding Light={StaticResource TextSecondaryLight}, Dark={StaticResource TextSecondaryDark}}" 
                               FontAttributes="Bold" Margin="5,0"/>
                        <Entry Text="{Binding CurrentHabit.Goal}" 
                               Keyboard="Numeric"
                               BackgroundColor="{AppThemeBinding Light={StaticResource PageBgLight}, Dark={StaticResource Gray900}}"
                               TextColor="{AppThemeBinding Light={StaticResource TextPrimaryLight}, Dark={StaticResource TextPrimaryDark}}"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>

            <VerticalStackLayout Margin="0,10,0,0">
                <Button Text="âœ… DeÄŸiÅŸiklikleri Kaydet" 
                        Command="{Binding SaveCommand}" 
                        Style="{StaticResource ActionButtonStyle}"
                        BackgroundColor="{StaticResource OrangePrimary}" 
                        TextColor="White" />

                <Button Text="ðŸ—‘ï¸ AlÄ±ÅŸkanlÄ±ÄŸÄ± Sil" 
                        Command="{Binding DeleteCommand}" 
                        Style="{StaticResource ActionButtonStyle}"
                        BackgroundColor="#E57373" 
                        TextColor="White" 
                        Margin="0,10,0,0"/>
            </VerticalStackLayout>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>